**ForumFusion - легкий форумный движок для ваших целей.**

> Рабочая демо-версия расположена по адресу: [*К сожалению, хост занят другими делами*](none)
***
**Инсталляция.**

Клонируйте репозиторий ForumFusion:
```bash
git clone https://github.com/gahmet2004/forumfusion.git
cd forumfusion
```

> Для комфортного запуска на сервере советуем использовать утилиту **screen** для Linux.

Для разворачивания ForumFusion понадобятся python3 и сторонние библиотеки:

 - flask - *мини-фреймворк для веб-сервера*
 - waitress - *реализация WSGI-интерфейса*
 - bcrypt - *надёжное шифрование паролей пользователей*

```bash
# В репозитории имеется скрипт для глобального установления необходимых 
# библиотек, которая так же запускает сервер после установки.
bash ginstall.sh
# В случае установки утилитой `pip` (`pip3`), можно использовать
# находящийся в репозитории `requirements.txt`:
pip3 install -r requirements.txt
```
Запуск проекта после установки зависимостей достаточно прост:
```bash
python3 _main_.py
```

> Форум работает на файловой базе данных sqlite3, поэтому дополнительная настройка не понадобится. 
> Запросы на инициализацию базы заранее описаны в программе и выполняются автоматически.
***
**Настройка форума.**
После первого запуска, сервер предложит Вам настроить форум: аккаунт администратора, пароль от панели Администратора, настройка SMTP-сервера и данные для отправки почты.

Если после настройки Вы не получили письмо на указанный в начале почтовый адрес, то что-то пошло не по плану.

> Некоторые провайдеры специально блокируют порты для отправки писем SMTP. Будьте внимательны перед покупкой сервера :)

***
**Функционал форума.**

_Реализовано:_
+ Авторизация (вход и регистрация пользователей с подтверждением через почту):
![Авторизация](https://github.com/gahmet2004/forumfusion/blob/main/UML/pictures/auth_form.png?raw=true)
![Почтовая доставка](https://github.com/gahmet2004/forumfusion/blob/main/UML/pictures/email_delivery.png?raw=true)

+ Отображение списка категорий и подкатегорий тем форума (кликабельно), подгружаемых с базы данных:
![Список категорий и подкатегорий](https://github.com/gahmet2004/forumfusion/blob/main/UML/pictures/categories.png?raw=true)
+ Список тем/обсуждений в подкатегории:
![Топики](https://github.com/gahmet2004/forumfusion/blob/main/UML/pictures/subcategory.png?raw=true)
+ Обсуждения в виде комментариев под каждым топиком. Сами топики поддерживают MarkDown (комментарии пока, к сожалению, нет):
![Топик "Базанова, как дела с тестированием?"](https://github.com/gahmet2004/forumfusion/blob/main/UML/pictures/topic_view.png?raw=true)
+ Настройка профиля форумного аккаунта:
![Профиль](https://github.com/gahmet2004/forumfusion/blob/main/UML/pictures/profile_view.png?raw=true)
_На момент сдачи проекта не реализовано:_

+ Панель администратора и модератора (категории были добавлены напрямую через Базу Данных)
+ Рейтинг тем и пользоватлей. Система подписчиков (однако, в базе данных под их реализацию всё готово).
+ Обработка загруженных файлов на сервер (в связи с этим отсутствует возможность смены дефолтных аватар-изображений).

***
**Технические аспекты**

| Модуль | Описание |	
|--|--|
| Server | Составляет `_main_.py` в виде Flask-приложения, а так же шаблоны и статические файлы к нему|
| System | Составляют классы `Database`, `MailService`, `Settings` - отвечающие за стабильную работу системы.
| Forum | Состоит из классов `Category`, `Subcategory`, `Topic`, `Review`
| User | Организован модуль в виде классов `User`, `Profile`, `Settings`, `Punishment` - система наказаний на данный момент не реализована.

В проекте не использовались стандартные утилиты Flask. Обращения к базе данных, работа с авторизацией были написаны самостоятельно с нуля. В `_libs/service/` можно найти другие полезные утилиты, написанные для работы с кодом форума.

Небольшой декоратор (pattern) на авторизацию к страницам, где это было необходимо:
```python
def  authRequired(func):
	def  authCheck(*args, **kwargs):
		if  settings.getPanelPass() == "notsetup":
			. . .
			return  flask.redirect("/auth")
		return  func(*args, **kwargs)
	authCheck.__name__ = func.__name__
	return  authCheck
```
```python3
@engine.route("/")
@authRequired
def  root_manager():
```
База данных защищена поточным locker'ом от одновременных записей на обновление и добавление записей. Система запросов была разработана с нуля.
